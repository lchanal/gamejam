<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <script src="phaser.min.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {

    	var BOARD_COLS = 10;
        var BOARD_ROWS = 8;
        var SLOT_SIZE = 64;
        var SLOT_SPACING = 6;
        var SLOT_SIZE_SPACED = SLOT_SIZE + SLOT_SPACING;
        
        var game = new Phaser.Game(BOARD_COLS * SLOT_SIZE_SPACED + 200, BOARD_ROWS * SLOT_SIZE_SPACED, Phaser.AUTO, '', { preload: preload, create: create });

        var trees;
        var selectedTree = null;
        
        function preload () {
            game.load.spritesheet("TREES", "background.png", SLOT_SIZE, SLOT_SIZE, 5);
        }

        function create () {
        	spawnBoard();
        }
        

        function selectTree(tree, pointer){
        	selectedTree = tree;
        }
        
        function initBoard() {
        	
        }
        
     // fill the screen with as many tree as possible
        function spawnBoard() {

        	trees = game.add.group();
	
            for (var i = 0; i < BOARD_COLS; i++){
                for (var j = 0; j < BOARD_ROWS; j++){
                	var treeHeight = game.rnd.integerInRange(1, 5);
                	var treeDirection = game.rnd.integerInRange(0, 9);
                	
                	var tree = trees.create(i * SLOT_SIZE_SPACED + SLOT_SPACING / 2 , j * SLOT_SIZE_SPACED + SLOT_SPACING / 2, "TREES", treeHeight);
                    
                	tree.treeHeight = treeHeight;
                    tree.direction = treeDirection;
                    
                    tree.posX = i;
                    tree.posY = j;
                    
                    tree.inputEnabled = true;
                    
                    tree.events.onInputDown.add(selectTree, this);
                }
            }
        }
        

        

    };

    </script>

    </body>
</html>